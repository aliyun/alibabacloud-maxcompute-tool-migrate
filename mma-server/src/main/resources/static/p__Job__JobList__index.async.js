(self.webpackChunk=self.webpackChunk||[]).push([[126],{64317:function(R,C,e){"use strict";var c=e(1413),v=e(44925),s=e(86074),f=e(22270),n=e(62435),l=e(66758),E=e(86095),D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],S=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],T=n.forwardRef(function(r,d){var m=r.fieldProps,o=r.children,p=r.params,a=r.proFieldProps,j=r.mode,L=r.valueEnum,b=r.request,A=r.showSearch,U=r.options,M=(0,v.Z)(r,D),h=(0,n.useContext)(l.Z);return(0,s.jsx)(E.Z,(0,c.Z)((0,c.Z)({mode:"edit",valueEnum:(0,f.h)(L),request:b,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:U,mode:j,showSearch:A,getPopupContainer:h.getPopupContainer},m),ref:d,proFieldProps:a},M),{},{children:o}))}),i=n.forwardRef(function(r,d){var m=r.fieldProps,o=r.children,p=r.params,a=r.proFieldProps,j=r.mode,L=r.valueEnum,b=r.request,A=r.options,U=(0,v.Z)(r,S),M=(0,c.Z)({options:A,mode:j||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},m),h=(0,n.useContext)(l.Z);return(0,s.jsx)(E.Z,(0,c.Z)((0,c.Z)({mode:"edit",valueEnum:(0,f.h)(L),request:b,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:h.getPopupContainer},M),ref:d,proFieldProps:a},U),{},{children:o}))}),u=T,P=i,_=u;_.SearchSelect=P,_.displayName="ProFormComponent",C.Z=_},37306:function(R,C,e){var c=e(44801);function v(s,f){var n=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!n){if(Array.isArray(s)||(n=c(s))||f&&s&&typeof s.length=="number"){n&&(s=n);var l=0,E=function(){};return{s:E,n:function(){return l>=s.length?{done:!0}:{done:!1,value:s[l++]}},e:function(u){throw u},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,S=!1,T;return{s:function(){n=n.call(s)},n:function(){var u=n.next();return D=u.done,u},e:function(u){S=!0,T=u},f:function(){try{!D&&n.return!=null&&n.return()}finally{if(S)throw T}}}}R.exports=v,R.exports.__esModule=!0,R.exports.default=R.exports},87969:function(R,C,e){"use strict";e.d(C,{b:function(){return S}});var c=e(37306),v=e.n(c),s=e(66933),f=e.n(s),n=e(62435),l=e(81701),E=e(64317),D=e(86074),S=function(i){var u=(0,n.useState)({}),P=f()(u,2),_=P[0],r=P[1];return(0,n.useEffect)(function(){(0,l.BO)().then(function(d){var m={},o=v()((d==null?void 0:d.data)||[]),p;try{for(o.s();!(p=o.n()).done;){var a=p.value;m[a]=a}}catch(j){o.e(j)}finally{o.f()}r(m)})},[]),(0,D.jsx)(E.Z,{showSearch:!0,name:i.keyName,valueEnum:_})}},37245:function(R,C,e){"use strict";e.d(C,{a:function(){return T},e:function(){return S}});var c=e(37306),v=e.n(c),s=e(66933),f=e.n(s),n=e(62435),l=e(8836),E=e(64317),D=e(86074),S=function(){var u=(0,n.useState)({}),P=f()(u,2),_=P[0],r=P[1];return(0,n.useEffect)(function(){(0,l.e6)().then(function(d){var m={},o=v()((d==null?void 0:d.data)||[]),p;try{for(o.s();!(p=o.n()).done;){var a=p.value;m[a.id]={text:a.name}}}catch(j){o.e(j)}finally{o.f()}r(m)})},[]),(0,D.jsx)(E.Z,{showSearch:!0,name:"sourceId",valueEnum:_})},T=function(){var u=(0,n.useState)({}),P=f()(u,2),_=P[0],r=P[1];return(0,n.useEffect)(function(){(0,l.e6)().then(function(d){var m={},o=v()((d==null?void 0:d.data)||[]),p;try{for(o.s();!(p=o.n()).done;){var a=p.value;m[a.name]={text:a.name}}}catch(j){o.e(j)}finally{o.f()}r(m)})},[]),(0,D.jsx)(E.Z,{showSearch:!0,name:"sourceName",valueEnum:_})}},85933:function(R,C,e){"use strict";e.r(C),e.d(C,{default:function(){return b}});var c=e(29883),v=e.n(c),s=e(54332),f=e.n(s),n=e(94043),l=e.n(n),E=e(85067),D=e(15999),S=e(45777),T=e(79166),i=e(24565),u=e(48086),P=e(62435),_=e(51198),r=e(18036),d={INIT:{text:"\u672A\u6267\u884C"},DOING:{text:"\u6267\u884C\u4E2D"},FAILED:{text:"\u5931\u8D25"},DONE:{text:"\u6210\u529F"}},m={INIT:"default",DOING:"processing",FAILED:"error",DONE:"success"},o=e(87969),p=e(37245),a=e(86074),j=["type","defaultRender"],L=["type","defaultRender"],b=function(){var A=(0,P.useRef)(),U=[{title:"\u4EFB\u52A1\u540D",dataIndex:"description",render:function(h,t){return(0,a.jsx)(r.Link,{to:"/jobs/tasks?jobId=".concat(t.id),children:t.description})}},{title:"\u6570\u636E\u6E90",dataIndex:"source_name",key:"sourceName",renderFormItem:function(h,t,I){var B=t.type,y=t.defaultRender,x=f()(t,j);return(0,a.jsx)(p.a,{})}},{title:"\u6E90\u6570\u636E\u5E93",dataIndex:"db_name",key:"dbName"},{title:"\u76EE\u7684\u9879\u76EE",dataIndex:"dst_mc_project",key:"dstOdpsProject",renderFormItem:function(h,t,I){var B=t.type,y=t.defaultRender,x=f()(t,L);return(0,a.jsx)(o.b,{keyName:"dstOdpsProject"})}},{title:"\u7C7B\u578B",dataIndex:"type",valueType:"select",valueEnum:{Tables:{text:"\u591A\u8868"},Database:{text:"\u5355\u5E93"},Partitions:{text:"\u591A\u5206\u533A"}}},{title:"\u5176\u4ED6\u4FE1\u606F",dataIndex:"config",colSize:1,renderText:function(h,t,I,B){return JSON.stringify(t.config,null,4)},ellipsis:{showTitle:!1},render:function(h,t){var I=JSON.stringify(t.config,null,4);return(0,a.jsx)(S.Z,{placement:"topLeft",title:I,children:I})},search:!1},{title:"\u72B6\u6001",dataIndex:"status",render:function(h,t){return t.stopped?(0,a.jsx)(T.Z,{status:"warning",text:"\u505C\u6B62"}):(0,a.jsx)(T.Z,{status:m[t.status],text:d[t.status].text})},valueType:"select",valueEnum:{INIT:{text:"\u672A\u6267\u884C"},DOING:{text:"\u6267\u884C\u4E2D"},DONE:{text:"\u5B8C\u6210"},FAILED:{text:"\u5931\u8D25"},STOPPED:{text:"\u505C\u6B62"}}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",search:!1},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(h,t){var I=[];return t.status=="DOING"&&I.push((0,a.jsx)(i.Z,{title:t.stopped?"\u5F00\u542F\u4EFB\u52A1":"\u505C\u6B62\u4EFB\u52A1",onConfirm:v()(l().mark(function B(){var y,x;return l().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(t.stopped){O.next=8;break}return x=u.ZP.loading("\u505C\u6B62\u4EFB\u52A1\u4E2D..."),O.next=4,(0,_.qR)(t.id,"stop");case 4:x(),u.ZP.success("\u505C\u6B62\u4EFB\u52A1\u6210\u529F"),O.next=11;break;case 8:return O.next=10,(0,_.qR)(t.id,"retry");case 10:u.ZP.success("\u542F\u52A8\u4EFB\u52A1\u6210\u529F");case 11:(y=A.current)===null||y===void 0||y.reload();case 12:case"end":return O.stop()}},B)})),children:(0,a.jsx)("a",{type:"primary",children:t.stopped?"\u542F\u52A8":"\u505C\u6B62"})},"1")),I.push([(0,a.jsx)(i.Z,{title:"\u786E\u5B9A\u5220\u9664\u4EFB\u52A1?",onConfirm:v()(l().mark(function B(){var y,x;return l().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return x=u.ZP.loading("\u505C\u6B62\u5E76\u5220\u9664\u4EFB\u52A1\u4E2D..."),O.next=3,(0,_.qR)(t.id,"delete");case 3:x(),(y=A.current)===null||y===void 0||y.reload();case 5:case"end":return O.stop()}},B)})),okText:"Yes",cancelText:"No",children:(0,a.jsx)("a",{href:"#",children:"\u5220\u9664"})},"2")]),t.status=="FAILED"&&I.push((0,a.jsx)(i.Z,{title:"\u786E\u5B9A\u91CD\u8BD5\u4EFB\u52A1?",onConfirm:v()(l().mark(function B(){return l().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,_.qR)(t.id,"retry");case 2:setTimeout(function(){var g;(g=A.current)===null||g===void 0||g.reload()},2e3);case 3:case"end":return x.stop()}},B)})),okText:"Yes",cancelText:"No",children:(0,a.jsx)("a",{href:"#",children:"\u91CD\u8BD5"})},"3")),I},search:!1}];return(0,a.jsx)(E._z,{children:(0,a.jsx)(D.Z,{actionRef:A,columns:U,request:function(h,t,I){return(0,_.Ly)(h,t,I)},rowKey:"id",search:{filterType:"light"}})})}}}]);
